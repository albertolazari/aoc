#!/bin/bash -e

script_dir="$(dirname "$(readlink -f "$BASH_SOURCE")")"

print_help() {
    echo 'usage: aoc <command> [args]'
    echo commands:

    local command
    for command in "$script_dir"/../scripts/*.sh; do
        echo "  $(basename ${command/.sh})"
    done
    echo '  help'
}

if [[ -z "$1" ]]; then
    print_help >&2
    exit 1
fi

if [[ "$1" =~ ^[-]?[-]?help|^[-]?h ]]; then
    print_help
    exit
fi

command="$1"
script="$script_dir/../scripts/$command.sh"
shift

if [[ ! -f "$script" ]]; then
    echo aoc: $command command not found >&2
    print_help >&2
    exit 1
fi

"$script" "$@"
